<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TileGame 3D</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="game-container">
        <canvas id="gameCanvas"></canvas>
    </div>

    <!-- Main Menu -->
    <div id="main-menu">
        <h1>TileGame 3D</h1>
        <div class="class-selection">
            <h3>Choose Class</h3>
            <div class="class-buttons">
                <button class="class-btn selected" data-class="warrior">Warrior</button>
                <button class="class-btn" data-class="mage">Mage</button>
                <button class="class-btn" data-class="hunter">Hunter</button>
            </div>
        </div>
        <div class="menu-options">
            <button class="menu-btn" data-mode="horde">Skeleton Horde</button>
            <button class="menu-btn" data-mode="dungeon">Dungeon</button>
            <button class="menu-btn" data-mode="boss">Skeleton Boss</button>
        </div>
    </div>

    <div id="ui">
        <div id="health-bar">
            <div id="health-fill"></div>
            <span id="health-text">100 / 100</span>
        </div>
        <div id="controls-hint">
            <span>WASD: Move</span>
            <span>LMB: Click to Move/Attack</span>
            <span>RMB: Target/Turn</span>
            <span>Tab: Cycle Target</span>
            <span>Space: Jump</span>
        </div>
        <div id="ability-bar">
            <div class="ability" id="ability-q">
                <span class="key">Q</span>
                <span class="name">Cleave</span>
                <div class="cooldown-overlay"></div>
            </div>
            <div class="ability" id="ability-f">
                <span class="key">F</span>
                <span class="name">Whirlwind</span>
                <div class="cooldown-overlay"></div>
            </div>
            <div class="ability" id="ability-e">
                <span class="key">E</span>
                <span class="name">Parry</span>
                <div class="cooldown-overlay"></div>
            </div>
            <div class="ability" id="ability-r">
                <span class="key">R</span>
                <span class="name">Heroic Leap</span>
                <div class="cooldown-overlay"></div>
            </div>
            <div class="ability" id="ability-c">
                <span class="key">C</span>
                <span class="name">Sunder</span>
                <div class="cooldown-overlay"></div>
            </div>
        </div>
        <!-- Hotbar for quick-use consumables -->
        <div id="hotbar">
            <div class="hotbar-slot" data-slot="0">
                <span class="hotbar-key">1</span>
                <div class="hotbar-item"></div>
                <div class="hotbar-quantity"></div>
                <div class="hotbar-cooldown"></div>
            </div>
            <div class="hotbar-slot" data-slot="1">
                <span class="hotbar-key">2</span>
                <div class="hotbar-item"></div>
                <div class="hotbar-quantity"></div>
                <div class="hotbar-cooldown"></div>
            </div>
            <div class="hotbar-slot" data-slot="2">
                <span class="hotbar-key">3</span>
                <div class="hotbar-item"></div>
                <div class="hotbar-quantity"></div>
                <div class="hotbar-cooldown"></div>
            </div>
            <div class="hotbar-slot" data-slot="3">
                <span class="hotbar-key">4</span>
                <div class="hotbar-item"></div>
                <div class="hotbar-quantity"></div>
                <div class="hotbar-cooldown"></div>
            </div>
            <div class="hotbar-slot" data-slot="4">
                <span class="hotbar-key">5</span>
                <div class="hotbar-item"></div>
                <div class="hotbar-quantity"></div>
                <div class="hotbar-cooldown"></div>
            </div>
            <div id="gold-display">
                <span id="gold-icon">$</span>
                <span id="gold-amount">0</span>
            </div>
        </div>
    </div>

    <!-- Inventory Panel -->
    <div id="inventory-panel">
        <div id="inventory-header">
            <span>Inventory</span>
            <button id="inventory-close">X</button>
        </div>
        <div id="inventory-content">
            <div id="equipment-section">
                <div class="equip-slot" data-slot="helmet">
                    <span class="equip-label">Head</span>
                </div>
                <div class="equip-slot" data-slot="weapon">
                    <span class="equip-label">Weapon</span>
                </div>
                <div class="equip-slot" data-slot="chest">
                    <span class="equip-label">Chest</span>
                </div>
                <div class="equip-slot" data-slot="gloves">
                    <span class="equip-label">Hands</span>
                </div>
                <div class="equip-slot" data-slot="boots">
                    <span class="equip-label">Feet</span>
                </div>
                <div class="equip-slot" data-slot="ring">
                    <span class="equip-label">Ring</span>
                </div>
                <div class="equip-slot" data-slot="amulet">
                    <span class="equip-label">Amulet</span>
                </div>
            </div>
            <div id="inventory-grid"></div>
        </div>
        <div id="equipment-stats">
            <span>DMG: <span id="stat-damage">0</span></span>
            <span>DEF: <span id="stat-defense">0</span></span>
        </div>
    </div>

    <!-- Item Tooltip -->
    <div id="item-tooltip">
        <div id="tooltip-name"></div>
        <div id="tooltip-type"></div>
        <div id="tooltip-stats"></div>
        <div id="tooltip-desc"></div>
    </div>

    <!-- Crosshair removed - using visible cursor now -->

    <div id="target-frame">
        <div id="target-name">Skeleton</div>
        <div id="target-health-bar">
            <div id="target-health-fill"></div>
        </div>
    </div>

    <button id="return-menu-btn">Menu</button>

    <div id="minimap">
        <canvas id="minimap-canvas" width="180" height="180"></canvas>
        <span id="minimap-label">Map</span>
    </div>

    <!-- Fishing Prompt -->
    <div id="fishing-prompt" class="interaction-prompt">
        <span class="prompt-key">F</span>
        <span class="prompt-text">Fish</span>
    </div>

    <!-- Fishing Status -->
    <div id="fishing-status">
        <span id="fishing-text">Fishing...</span>
    </div>

    <!-- Fishing Minigame Popup -->
    <div id="fishing-popup">
        <div id="fishing-popup-content">
            <div id="fishing-popup-header">
                <span id="fishing-popup-title">Fishing!</span>
                <span id="fishing-popup-hint">Press the keys!</span>
            </div>
            <div id="fishing-game-area">
                <!-- Timer Display -->
                <div id="qte-timer-display">
                    <span id="qte-time-remaining">30</span>
                    <span id="qte-time-label">seconds</span>
                </div>
                <!-- QTE Key Display with Queue -->
                <div id="qte-container">
                    <div id="qte-key-display">
                        <span id="qte-current-key">W</span>
                        <div id="qte-timer-ring">
                            <svg viewBox="0 0 100 100">
                                <circle id="qte-timer-bg" cx="50" cy="50" r="45"/>
                                <circle id="qte-timer-fill" cx="50" cy="50" r="45"/>
                            </svg>
                        </div>
                    </div>
                    <div id="qte-key-queue">
                        <span class="queue-key">A</span>
                        <span class="queue-key">S</span>
                        <span class="queue-key">D</span>
                        <span class="queue-key">W</span>
                        <span class="queue-key">A</span>
                    </div>
                    <div id="qte-feedback"></div>
                </div>
                <!-- Score Display -->
                <div id="qte-score-area">
                    <div id="qte-fish-caught">
                        <span id="qte-fish-icon">üêü</span>
                        <span id="qte-fish-value">0</span>
                    </div>
                    <div id="qte-combo">
                        <span id="qte-combo-label">Combo</span>
                        <span id="qte-combo-value">0</span>
                    </div>
                    <div id="qte-score">
                        <span id="qte-score-label">Score</span>
                        <span id="qte-score-value">0</span>
                    </div>
                </div>
            </div>
            <div id="fishing-popup-footer">
                <span id="fishing-status-text">Waiting for bite...</span>
            </div>
        </div>
    </div>

    <!-- Fishing Message -->
    <div id="fishing-message"></div>

    <!-- Cooking Prompt -->
    <div id="cooking-prompt" class="interaction-prompt">
        <span class="prompt-key">F</span>
        <span class="prompt-text">Cook</span>
    </div>

    <!-- Cooking Selection Popup -->
    <div id="cooking-selection">
        <div id="cooking-selection-content">
            <div id="cooking-selection-header">
                <span id="cooking-selection-title">Select Fish to Cook</span>
                <button id="cooking-selection-close">X</button>
            </div>
            <div id="cooking-selection-grid"></div>
            <div id="cooking-selection-footer">
                <span>Click a fish to start cooking</span>
            </div>
        </div>
    </div>

    <!-- Cooking Minigame Popup -->
    <div id="cooking-popup">
        <div id="cooking-popup-content">
            <div id="cooking-popup-header">
                <span id="cooking-popup-title">Cooking!</span>
                <span id="cooking-popup-hint">Flick the pan upward to flip!</span>
            </div>
            <div id="cooking-game-area">
                <div id="cooking-pan-container">
                    <div id="cooking-pan">
                        <div id="cooking-pan-handle"></div>
                    </div>
                    <div id="cooking-food"></div>
                </div>
                <div id="cooking-score-area">
                    <div id="cooking-flips">
                        <span id="cooking-flips-label">Flips</span>
                        <span id="cooking-flips-value">0 / 3</span>
                    </div>
                    <div id="cooking-quality">
                        <span id="cooking-quality-label">Quality</span>
                        <div id="cooking-quality-bar">
                            <div id="cooking-quality-fill"></div>
                        </div>
                    </div>
                    <div id="cooking-rating">
                        <span id="cooking-rating-value">Ready...</span>
                    </div>
                </div>
            </div>
            <div id="cooking-popup-footer">
                <span id="cooking-status-text">Move the pan with your mouse!</span>
            </div>
        </div>
    </div>

    <!-- Cooking Message -->
    <div id="cooking-message"></div>

    <script type="importmap">
    {
        "imports": {
            "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
            "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
    }
    </script>
    <script type="module" src="js/main.js?v=7"></script>
</body>
</html>
